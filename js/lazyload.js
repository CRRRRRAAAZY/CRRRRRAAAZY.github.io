!function(i,o){var e=typeof i!=="undefined";var n=e&&"IntersectionObserver"in i;var t=Array.prototype.slice.call(o.querySelectorAll("img[srcset]"));if(!t||t.length===0){return}if(n){var r=new IntersectionObserver(function(e){e.forEach(({target:e,isIntersecting:n})=>{if(!n)return;e.setAttribute("srcset",e.src);e.onload=e.onerror=()=>r.unobserve(e)})},{threshold:[0],rootMargin:(i.innerHeight||o.documentElement.clientHeight)+"px"});t.map(e=>r.observe(e))}else{function c(e){var n=e.getBoundingClientRect();var t=i.innerHeight||o.documentElement.clientHeight;var r=n.top;return r>=0&&r<=t*3||r<=0&&r<=-(t*2)-n.height}function s(e,n){var t=new Image;var r=e.getAttribute("src");t.onload=function(){e.srcset=r;n&&n()};t.srcset=r}var l=new Debouncer(a);function a(){for(var e=0;e<t.length;e++){if(c(t[e])){(function(e){var n=t[e];s(n,function(){t=t.filter(function(e){return n!==e})})})(e)}}if(t.length===0){i.removeEventListener("scroll",l,false)}}i.addEventListener("scroll",l,false);l.handleEvent()}}(window,document);